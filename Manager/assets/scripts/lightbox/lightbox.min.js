var Lightbox=function(){"use strict";const e=new class{createElement(e){return document.createElement(e)}appendChild(e,t){e&&e.appendChild(t)}appendHtml(e,t){e&&e.insertAdjacentHTML("beforeend",t)}addEventListener(e,t,o){e&&e.addEventListener(t,o)}addClass(e,t){e&&(this.hasClass(e,t)||(0===e.classList.length?e.className=t:e.className=e.className+" "+t,e.className=e.className.replace(/  +/g," ")))}removeClass(e,t){if(e&&e.classList.length>0){let o,i,l,a,r=t.split(" ");for(o=0,l=r.length;o<l;++o){if(!r[o])continue;let t=r[o],l="",s=e.className.split(" ");for(i=0,a=s.length;i<a;++i)s[i]&&s[i]!==t&&(l+=s[i]+" ");e.className=l.trim()}""===e.className&&e.removeAttribute("class")}}hasClass(e,t){if(!e)return!1;try{let o=e.getAttribute("class");return new RegExp("\\b"+t+"\\b").test(o)}catch(e){}}moveAfter(e,t){t.parentNode.insertBefore(e,t),t.parentNode.insertBefore(t,t.previousElementSibling)}elementChildren(e){const t=e.childNodes;let o=[],i=t.length;for(;i--;)1===t[i].nodeType&&o.unshift(t[i]);return o}parentsHasClass(e,t){for(;e;){if(!e.tagName)return!1;if("BODY"===e.tagName||"HTML"===e.tagName)return!1;if(this.hasClass(e,t))return!0;e=e.parentNode}}parentsHasId(e,t){for(;e;){if(!e.tagName)return!1;if("BODY"===e.tagName||"HTML"===e.tagName)return!1;if(e.id===t)return!0;e=e.parentNode}}parentsHasTag(e,t){for(;e;){if(!e.tagName)return!1;if("BODY"===e.tagName||"HTML"===e.tagName)return!1;if(e.tagName.toLowerCase()===t.toLowerCase())return!0;e=e.parentNode}}parentsHasAttribute(e,t){for(;e;){if(!e.tagName)return!1;if("BODY"===e.tagName||"HTML"===e.tagName)return!1;try{if(e.hasAttribute(t))return!0}catch(e){}e=e.parentNode}}parentsHasElement(e,t){for(;e;){if(!e.tagName)return!1;if("BODY"===e.tagName||"HTML"===e.tagName)return!1;if(!(e=e.parentNode))return!1;if(!e.tagName)return!1;if(e.tagName.toLowerCase()===t)return!0}}removeClasses(e,t){for(let o=0;o<e.length;o++)e[o].classList.remove(t)}removeAttributes(e,t){for(let o=0;o<e.length;o++)e[o].removeAttribute(t)}removeElements(e){Array.prototype.forEach.call(e,(e=>{e.parentNode.removeChild(e)}))}getStyle(e,t){return window.getComputedStyle?window.getComputedStyle(e,null).getPropertyValue(t):e.style[t.replace(/-([a-z])/g,(function(e){return e[1].toUpperCase()}))]}};class t{constructor(){let t=document.querySelector("#_cbhtml");if(t||(t=e.createElement("div"),t.id="_cbhtml",t.className="is-ui",e.appendChild(document.body,t)),this.builderStuff=t,!this.builderStuff.querySelector("#_lightbox")){let t='\n                <div class="is-lightbox lightbox-externalvideo">\n                    <button class="cmd-lightbox-close" title="Close" type="button" style="flex:none;position:absolute;top:0;right:0;background:none;z-index:1;">\n                        <svg><use xlink:href="#icon-close"></use></svg>\n                    </button>\n                    <div class="lightbox-content" style="width:100%;">\n                        <div class="embed-responsive embed-responsive-16by9" style="width:100%;">\n                        <iframe width="560" height="315" src="about:blank" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>\n                        </div>\n                    </div>\n                </div>\n                <div class="is-lightbox lightbox-video light">\n                    <button class="cmd-lightbox-close" title="Close" type="button" style="flex:none;position:absolute;top:0;right:0;background:none;z-index:1;">\n                        <svg><use xlink:href="#icon-close"></use></svg>\n                    </button>\n                    <div class="lightbox-content" style="width:100%;"></div>\n                </div>\n                <div class="is-lightbox lightbox-image light">\n                    <button class="cmd-lightbox-close" title="Close" type="button" style="flex:none;position:absolute;top:0;right:0;background:none;z-index:1;">\n                        <svg><use xlink:href="#icon-close"></use></svg>\n                    </button>\n                    <div class="lightbox-content" style="width:100%;"></div>\n                </div>\n                <svg width="0" height="0" style="position:absolute;display:none;">\n                    <defs>\n                        <symbol viewBox="0 0 24 24" id="icon-close" stroke-width="0.7" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">\n                            <path stroke="none" d="M0 0h24v24H0z" fill="none"></path><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line>\n                        </symbol>\n                    </defs>\n                </svg>\n            ';this.builderStuff.insertAdjacentHTML("afterbegin",t);this.builderStuff.querySelectorAll("div.is-lightbox").forEach((t=>{t.addEventListener("click",(o=>{if(e.parentsHasClass(o.target,"lightbox-content"))return;e.removeClass(t,"active");t.querySelector(".cmd-lightbox-close").style.opacity=0,document.body.style.overflowY="",setTimeout((()=>{let e=t.querySelector("iframe");e&&e.setAttribute("src","about:blank"),t.style.display=""}),300)}))}))}}init(){document.querySelectorAll(".block-click,.button-click,.is-lightbox").forEach((e=>{e.addEventListener("click",(t=>{let o,i;if("a"===e.tagName.toLowerCase())o=e.getAttribute("href"),i=o.split(".").pop();else if(e.getAttribute("data-modal-url"))o=e.getAttribute("data-modal-url"),i=o.split(".").pop();else if(!(e.getAttribute("data-modal-image")||e.getAttribute("data-modal-video")||e.getAttribute("data-modal-externalvideo")))return;let l=e.getAttribute("data-modal-theme");l||(l="light");const a=e.getAttribute("data-modal-color");"jpg"===i||"jpeg"===i||"png"===i||"gif"===i||"webm"===i?this.openImage(o,l,a):"mp4"===i?this.openVideo(o,"dark",a):-1!==o.toLowerCase().indexOf("youtube.com")||-1!==o.toLowerCase().indexOf("vimeo.com")?this.openExternalVideo(o,"dark",a):e.getAttribute("data-modal-image")?(o=e.getAttribute("data-modal-image"),this.openImage(o,l,a)):e.getAttribute("data-modal-video")?(o=e.getAttribute("data-modal-video"),this.openVideo(o,"dark",a)):e.getAttribute("data-modal-externalvideo")?(o=e.getAttribute("data-modal-externalvideo"),this.openExternalVideo(o,"dark",a)):window.location.href=o,t.preventDefault()}))}))}openImage(t,o,i){let l=this.builderStuff.querySelector("div.is-lightbox.lightbox-image");window.frameElement&&!l&&(l=parent.document.querySelector(".is-lightbox.lightbox-image"));const a=l.querySelector(".cmd-lightbox-close");a.style.opacity=0,i&&(l.style.backgroundColor=i);l.querySelector(".lightbox-content").innerHTML="<img src="+t+">","light"===o?(e.addClass(l,"light"),e.removeClass(l,"dark")):(e.addClass(l,"dark"),e.removeClass(l,"light")),l.style.display="flex",window.frameElement||(document.body.style.overflowY="hidden"),setTimeout((()=>{e.addClass(l,"active"),setTimeout((()=>{a.style.opacity=1}),450)}),10)}openVideo(t,o,i){let l=document.querySelector(".is-lightbox.lightbox-video");window.frameElement&&!l&&(l=parent.document.querySelector(".is-lightbox.lightbox-video"));const a=l.querySelector(".cmd-lightbox-close");a.style.opacity=0,i&&(l.style.backgroundColor=i);l.querySelector(".lightbox-content").innerHTML='<video class="is-video-bg" playsinline controls autoplay width="100%"><source src="'+t+'" type="video/mp4"></video>',"light"===o?(e.addClass(l,"light"),e.removeClass(l,"dark")):(e.addClass(l,"dark"),e.removeClass(l,"light")),l.style.display="flex",window.frameElement||(document.body.style.overflowY="hidden"),setTimeout((()=>{e.addClass(l,"active"),setTimeout((()=>{a.style.opacity=1}),450)}),10)}openExternalVideo(t,o,i){let l=document.querySelector(".is-lightbox.lightbox-externalvideo");window.frameElement&&!l&&(l=parent.document.querySelector(".is-lightbox.lightbox-externalvideo"));const a=l.querySelector(".cmd-lightbox-close");a.style.opacity=0,i&&(l.style.backgroundColor=i),"light"===o?(e.addClass(l,"light"),e.removeClass(l,"dark")):(e.addClass(l,"dark"),e.removeClass(l,"light"));const r=l.querySelector("iframe");""!==(t=this.getIframeVideoUrl(t))&&r.setAttribute("src",t),l.style.display="flex",window.frameElement||(document.body.style.overflowY="hidden");const s=l.querySelector(".lightbox-content");s.style.width=16*s.offsetHeight/9+"px",setTimeout((()=>{e.addClass(l,"active"),setTimeout((()=>{a.style.opacity=1}),450)}),10)}getIframeVideoUrl(e){let t=e.match(/^.*(?:https?:)?(?:\/\/)?(?:[0-9A-Z-]+\.)?(?:youtu\.be\/|youtube(?:-nocookie)?\.com\/\S*?[^\w\s-])((?!videoseries)[\w-]{11})(?=[^\w-]|$)(?![?=&+%\w.-]*(?:['"][^<>]*>|<\/a>))[?=&+%\w.-]*/),o=/^.*(vimeo\.com\/)((channels\/[A-z]+\/)|(groups\/[A-z]+\/videos\/)|(video\/))?([0-9]+)\/?/.exec(e);if((null!==t||null!==o)&&-1===e.indexOf("player.vimeo.com")&&-1===e.indexOf("youtube.com/embed/")){if(null!==t){e="https://www.youtube.com/embed/"+t[1]+"?rel=0&autoplay=1&color=white"}if(null!==o&&o.length>=7){e="https://player.vimeo.com/video/"+o[6]}}return e}}return window.lightbox=new t,t}();
