{"version":3,"sources":["webpack:///./src/views/admin/index.vue?46bf","webpack:///src/views/admin/index.vue","webpack:///./src/views/admin/index.vue?b820","webpack:///./src/views/admin/index.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","on","$event","stopPropagation","preventDefault","handleCreate","apply","arguments","_v","directives","name","rawName","value","expression","staticStyle","list","scopedSlots","_u","key","fn","scope","_s","row","email","handleEdit","$index","loadingDelete","nativeOn","handleDelete","_e","staticRenderFns","filters","statusColor","status","published","draft","deleted","data","schema","loading","computed","mapGetters","created","methods","fetchData","getAdminList","console","catch","finally","index","params","_id","confirmButtonText","cancelButtonText","type","then","destroyAdmin","showClose","message","clearFilter","component"],"mappings":"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","file":"js/chunk-2d0b381b.a475e90e.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"app-container\"},[_c('el-row',{attrs:{\"type\":\"flex\",\"justify\":\"end\"}},[_c('el-button-group',[_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-circle-plus\",\"size\":\"mini\"},on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.handleCreate.apply(null, arguments)}}},[_vm._v(\"Agregar\")])],1)],1),_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.list,\"element-loading-text\":\"Loading\",\"highlight-current-row\":\"\",\"size\":\"mini\"}},[_c('el-table-column',{attrs:{\"label\":\"Nombre\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\" \"+_vm._s(scope.row.name)+\" \")]}}])}),_c('el-table-column',{attrs:{\"label\":\"Correo electrónico\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\" \"+_vm._s(scope.row.email)+\" \")]}}])}),_c('el-table-column',{attrs:{\"fixed\":\"right\",\"label\":\"Opciones\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"size\":\"mini\"},on:{\"click\":function($event){return _vm.handleEdit(scope.$index, scope.row)}}},[_vm._v(\"Editar\")]),(_vm.name != scope.row.name)?[_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"danger\",\"loading\":_vm.loadingDelete},nativeOn:{\"click\":function($event){$event.preventDefault();return _vm.handleDelete(scope.$index, scope.row)}}},[_vm._v(\"Eliminar\")])]:_vm._e()]}}])})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"app-container\">\r\n\r\n    <el-row  type=\"flex\" justify=\"end\">\r\n      <el-button-group>\r\n        <el-button\r\n          @click.stop.prevent=\"handleCreate\"\r\n          type=\"primary\"\r\n          icon=\"el-icon-circle-plus\"\r\n          size=\"mini\"\r\n          >Agregar</el-button\r\n        >\r\n\r\n      </el-button-group>\r\n    </el-row>\r\n\r\n    <el-table\r\n      v-loading=\"loading\"\r\n      :data=\"list\"\r\n      element-loading-text=\"Loading\"\r\n      highlight-current-row\r\n      style=\"width: 100%\"\r\n      size=\"mini\"\r\n    >\r\n      <!-- <el-table-column type=\"selection\" width=\"40\"> </el-table-column> -->\r\n      <el-table-column label=\"Nombre\" align=\"center\" >\r\n        <template slot-scope=\"scope\" >\r\n          {{ scope.row.name }}\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"Correo electrónico\" align=\"center\">\r\n        <template slot-scope=\"scope\" >\r\n          {{ scope.row.email }}\r\n        </template>\r\n      </el-table-column>\r\n      <!-- <el-table-column label=\"Rol\" >\r\n        <div slot-scope=\"scope\" v-if=\"scope.row.role=== undefined\">\r\n          Administrator\r\n        </div>\r\n        <div slot-scope=\"scope\" v-else>\r\n          {{ scope.row.role }}\r\n        </div>\r\n      </el-table-column> -->\r\n      <el-table-column fixed=\"right\" label=\"Opciones\" align=\"center\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button size=\"mini\" @click=\"handleEdit(scope.$index, scope.row)\"\r\n            >Editar</el-button\r\n          >\r\n          <template v-if=\"name != scope.row.name\">\r\n            <el-button\r\n              size=\"mini\"\r\n              type=\"danger\"\r\n              :loading=\"loadingDelete\"\r\n              @click.native.prevent=\"handleDelete(scope.$index, scope.row)\"\r\n              >Eliminar</el-button\r\n            >\r\n          </template>\r\n        </template>\r\n      </el-table-column>\r\n\r\n    </el-table>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters } from 'vuex'\r\nimport { getAdminList, destroyAdmin } from '@/api/admin'\r\n\r\nexport default {\r\n  filters: {\r\n    statusColor (status) {\r\n      const statusMap = {\r\n        published: 'success',\r\n        draft: 'gray',\r\n        deleted: 'danger'\r\n      }\r\n      return statusMap[status]\r\n    }\r\n  },\r\n  data () {\r\n    return {\r\n      list: null,\r\n      schema: [],\r\n      loading: true,\r\n      loadingDelete: false\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapGetters([\r\n      'name'\r\n    ])\r\n  },\r\n  created () {\r\n    this.fetchData()\r\n  },\r\n  methods: {\r\n    async fetchData () {\r\n      this.loading = true\r\n      await getAdminList().then((response) => {\r\n        this.list = response.data\r\n        console.log(response.data)\r\n      }).catch(this.responseCatch)\r\n        .finally(() => (this.loading = false))\r\n    },\r\n    handleCreate () {\r\n      this.$router.push({ name: 'admin.create' })\r\n    },\r\n    handleEdit (index, row) {\r\n      this.$router.push({ name: 'admin.edit', params: { _id: row._id } })\r\n    },\r\n    handleDelete (index, row) {\r\n      this.loadingDelete = true\r\n      this.$confirm(\r\n        'Será borrado permanentemente. ¿Desea continuar?',\r\n        'Atención',\r\n        {\r\n          confirmButtonText: 'Si',\r\n          cancelButtonText: 'Cancelar',\r\n          type: 'warning'\r\n        }\r\n      )\r\n        .then(async () => {\r\n          await destroyAdmin(row._id)\r\n            .then((response) => {\r\n              // let res = response.data\r\n              this.$message({\r\n                showClose: true,\r\n                message: '¡Registro eliminado!',\r\n                type: 'success'\r\n              })\r\n\r\n              this.list.splice(index, 1)\r\n            })\r\n            .catch(this.responseCatch)\r\n            .finally(() => (this.loadingDelete = false))\r\n        })\r\n        .catch(() => {\r\n          this.$message({\r\n            type: 'info',\r\n            message: 'Operación cancelada'\r\n          })\r\n          this.loadingDelete = false\r\n        })\r\n    },\r\n    clearFilter () {\r\n      this.$refs.filterTable.clearFilter()\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=57f6ac6a&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}