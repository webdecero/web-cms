(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-05f5db76"],{"267f":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.pageStore.loading,expression:"pageStore.loading"}],attrs:{"element-loading-text":"Cargando...",gutter:10,type:"flex",justify:"start"}},[a("el-dialog",{attrs:{title:"Configuraciones",visible:e.pageStore.dialogVisible,width:"30%","before-close":e.pageStore.handleClose},on:{"update:visible":function(t){return e.$set(e.pageStore,"dialogVisible",t)}}},[a("menu-buttons"),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"warning"},on:{click:function(t){e.pageStore.dialogVisible=!1}}},[e._v("Cerrar")])],1)],1),a("el-dialog",{attrs:{title:e.pageStore.isSubNode?"Crear Interior":"Crear Pagina",visible:e.pageStore.dialogVisibleNode,width:"30%","before-close":e.pageStore.handleClose},on:{"update:visible":function(t){return e.$set(e.pageStore,"dialogVisibleNode",t)}}},[a("form-page")],1),a("el-col",{attrs:{span:e.pageStore.isFormVisible?12:15}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("h3",{staticStyle:{display:"inline-flex"}},[a("strong",[e._v(" Paginas ")])]),a("el-button",{staticStyle:{float:"right","margin-left":"7px"},attrs:{type:"success",icon:"el-icon-plus"},on:{click:function(){return e.seeFormPage()}}},[e._v("Nuevo ")]),a("el-select",{staticStyle:{float:"right"},attrs:{placeholder:"Idioma"},on:{change:e.onChangeLang},model:{value:e.configStore.langSelected,callback:function(t){e.$set(e.configStore,"langSelected",t)},expression:"configStore.langSelected"}},e._l(e.configStore.langs,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("div",{staticClass:"text item"},[a("el-tree",{attrs:{data:e.pageStore.list,"node-key":"keyNamePage","default-expand-all":"","expand-on-click-node":!1,props:e.defaultProps,draggable:""},on:{"node-click":e.doubleClick},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.node,r=t.data;return a("span",{staticClass:"custom-tree-node"},[a("span",[e._v(e._s(n.label))]),a("span",[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:n.level>=4?"limite de paginas superado":"Agregar una pagina interior",placement:"top"}},[a("el-link",{staticClass:"link-button",attrs:{type:"success",icon:"el-icon-circle-plus-outline",disabled:n.level>=4},on:{click:function(){return e.seeFormInternalPage(n,r)}}})],1),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"Configuraciones",placement:"top"}},[a("el-link",{staticClass:"link-button",attrs:{type:"primary",icon:"el-icon-setting"},on:{click:function(){return e.viewMenuSettings(n,r)}}})],1),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"Eliminar",placement:"top"}},[a("el-link",{staticClass:"link-button",attrs:{icon:"el-icon-delete",type:"danger"},on:{click:function(){return e.removeNode(n,r)}}})],1)],1)])}}])}),a("el-divider"),a("el-row",{attrs:{"element-loading-text":"Cargando...",gutter:20,type:"flex",justify:"end"}},[a("el-col",{staticStyle:{display:"flex","justify-content":"center"},attrs:{span:8}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-circle-plus-outline"},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.onSaveTree.apply(null,arguments)}}},[e._v(" Guardar")])],1)],1)],1)])],1),e.pageStore.isFormVisible?a("el-col",{attrs:{span:12}},[a("form-node")],1):e._e()],1)],1)},r=[],o=a("c7eb"),s=a("1da1"),i=(a("d81d"),a("c740"),a("a434"),a("d3b7"),a("30b3")),l=a("35a4"),c=a("9057"),u=a("536c"),p=a("be92"),d=a("5c96"),f=a("b775");function m(){return Object(f["a"])({url:"site-map",method:"get"})}function g(e){return Object(f["a"])({url:"site-map/"+e,method:"get"})}function b(e,t){return Object(f["a"])({url:"site-map/"+t,method:"put",data:e})}function h(e){return Object(f["a"])({url:"site-map",method:"post",data:e})}var v=Object(l["a"])(),y=Object(c["a"])(),k=Object(p["c"])("site-map",{state:function(){return{configStore:v,pageStore:y,list:null,siteMaps:null,form:{},templateSiteMap:{keyNameSite:"",lang:""}}},actions:{indexSiteMap:function(){var e=this;return Object(s["a"])(Object(o["a"])().mark((function t(){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return y.loading=!0,t.next=3,m().then((function(t){return e.siteMaps=t.data,e.siteMaps})).catch((function(e){console.log("responseCatch -> data",e)})).finally((function(){return y.loading=!1}));case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})))()},showSiteMap:function(e){var t=this;return Object(s["a"])(Object(o["a"])().mark((function a(){return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return y.loading=!0,a.next=3,g(e).then((function(e){return t.list=e.data,t.list})).catch((function(e){console.log("responseCatch -> data",e)})).finally((function(){return y.loading=!1}));case 3:return a.abrupt("return",a.sent);case 4:case"end":return a.stop()}}),a)})))()},storeSiteMap:function(e){var t=this;return Object(s["a"])(Object(o["a"])().mark((function a(){return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,h(e).then((function(e){return e.success?(Object(d["Message"])({showClose:!0,message:e.messages[0]||"Error",type:"success"}),t.list=e.data,t.list):(Object(d["Message"])({showClose:!0,message:e.messages[0]||"Error",type:"danger"}),!1)})).catch((function(e){console.log("responseCatch -> data",e)}));case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}}),a)})))()},updateSiteMap:function(e,t){var a=this;return Object(s["a"])(Object(o["a"])().mark((function n(){return Object(o["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,b({map:e},t).then((function(e){return e.success?(Object(d["Message"])({showClose:!0,message:e.messages[0]||"Error",type:"success"}),a.list=e.data,a.list):(Object(d["Message"])({showClose:!0,message:e.messages[0]||"Error",type:"danger"}),!1)})).catch((function(e){console.log("responseCatch -> data",e)}));case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})))()}}}),O=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("el-row",{attrs:{justify:"center",type:"flex"}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"Editar contenido de pagina",placement:"top"}},[a("el-button",{staticClass:"button-size",attrs:{type:"warning",icon:"el-icon-edit-outline",plain:""},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.goToContent.apply(null,arguments)}}},[e._v("Contenido")])],1),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"Previsualizar pagina",placement:"top"}},[a("el-button",{staticClass:"button-size",attrs:{type:"success",icon:"el-icon-view",plain:""},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.goToPreview.apply(null,arguments)}}},[e._v("Previsualizar")])],1)],1),a("el-row",{staticClass:"container-button",attrs:{justify:"center",type:"flex"}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"Editar opciones de pagina",placement:"top"}},[a("el-button",{staticClass:"button-size",attrs:{type:"primary",icon:"el-icon-edit",plain:""},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.editNode.apply(null,arguments)}}},[e._v("Editar")])],1),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"Configuraciones de pagina (archivos js y css)",placement:"top"}},[a("el-button",{staticClass:"button-size",attrs:{type:"danger",icon:"el-icon-setting",plain:""},on:{click:e.goToConfigs}},[e._v("Configuración")])],1)],1)],1)},w=[],j=(a("a15b"),a("2ef0")),S=a.n(j),N=Object(c["a"])(),x=Object(l["a"])(),C={name:"menuButtons",data:function(){return{pageStore:N,configStore:x}},methods:{goToConfigs:function(){N.dialogVisible=!1,this.$router.push({name:"pages.edit.config",params:{keyName:N.data.keyNamePage}})},goToEdit:function(){this.$router.push({name:"pages.edit"}),N.dialogVisible=!1},goToContent:function(){var e=this;return Object(s["a"])(Object(o["a"])().mark((function t(){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$router.push({name:"pages.edit.content",params:{keyName:N.data.keyNamePage,slug:N.data.slug}}),N.dialogVisible=!1;case 2:case"end":return t.stop()}}),t)})))()},goToPreview:function(){N.dialogVisible=!1;var e=S.a.cloneDeep(x.langSelected),t=N.node,a=[];a.push(t.data.slug);var n="";if(t.level>1){var r=t.parent,o=t.level;while(o>0)a.push(r.data.slug),r=r.parent,o=r.level}a.pop(),a=a.reverse(),n=a.join("/"),n="/"+n,window.open(x.baseUrl+e+n,"_blank")},editNode:function(){var e=N.node,t="",a=!1;if(e.level>1){var n=e.parent,r=e.level;r>2&&(a=!0);while(r>0)t=n.data.slug+t,n=n.parent,r=n.level;a&&(t+="/")}N.formNode=N.data,N.formNode.isEdit=!1,N.formNode.slugComplete=t,N.isFormVisible=!0,N.dialogVisible=!1}}},P=C,T=(a("770b"),a("2877")),_=Object(T["a"])(P,O,w,!1,null,"b49bc9f0",null),M=_.exports,D=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"text item"},[a("ValidationObserver",{ref:"form",scopedSlots:e._u([{key:"default",fn:function(t){var n=t.invalid;return[a("el-form",{attrs:{"label-position":"top","label-width":"120px",model:e.pageStore.formNode}},[a("el-form-item",{attrs:{label:"Título",placeholder:"Título pagina"}},[a("ValidationProvider",{attrs:{name:"título página",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[a("el-input",{model:{value:e.pageStore.formNode.menuTitle,callback:function(t){e.$set(e.pageStore.formNode,"menuTitle",t)},expression:"pageStore.formNode.menuTitle"}}),a("span",[e._v(e._s(n[0]))])]}}],null,!0)})],1),a("el-form-item",{attrs:{label:"keyName",placeholder:"keyName"}},[a("ValidationProvider",{attrs:{name:"keyName",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[a("el-input",{model:{value:e.pageStore.formNode.keyNamePage,callback:function(t){e.$set(e.pageStore.formNode,"keyNamePage",t)},expression:"pageStore.formNode.keyNamePage"}}),a("span",[e._v(e._s(n[0]))])]}}],null,!0)})],1),a("el-form-item",{attrs:{label:"Slug"}},[a("ValidationProvider",{attrs:{name:"slug",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[a("el-input",{attrs:{placeholder:"slug"},model:{value:e.pageStore.formNode.slug,callback:function(t){e.$set(e.pageStore.formNode,"slug",t)},expression:"pageStore.formNode.slug"}},[a("template",{slot:"prepend"},[e._v(e._s(e.configStore.baseUrl.slice(0,-1)+e.pageStore.formNode.slugComplete))])],2),a("span",[e._v(e._s(n[0]))])]}}],null,!0)})],1),a("el-form-item",{attrs:{label:"Plantilla Header"}},[a("ValidationProvider",{attrs:{name:"plantilla header",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[a("el-select",{attrs:{filterable:"",placeholder:"Seleccionar plantilla Header"},model:{value:e.pageStore.formNode.keyNameTemplateHeader,callback:function(t){e.$set(e.pageStore.formNode,"keyNameTemplateHeader",t)},expression:"pageStore.formNode.keyNameTemplateHeader"}},e._l(e.pageStore.headerOptions,(function(e){return a("el-option",{key:e.keyName,attrs:{label:e.title,value:e.keyName}})})),1),a("span",[e._v(e._s(n[0]))])]}}],null,!0)})],1),a("el-form-item",{attrs:{label:"Plantilla Main"}},[a("ValidationProvider",{attrs:{name:"plantilla main",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[a("el-select",{attrs:{filterable:"",placeholder:"Seleccionar plantilla Main"},model:{value:e.pageStore.formNode.keyNameTemplateMain,callback:function(t){e.$set(e.pageStore.formNode,"keyNameTemplateMain",t)},expression:"pageStore.formNode.keyNameTemplateMain"}},e._l(e.pageStore.mainOptions,(function(e){return a("el-option",{key:e.keyName,attrs:{label:e.title,value:e.keyName}})})),1),a("span",[e._v(e._s(n[0]))])]}}],null,!0)})],1),a("el-form-item",{attrs:{label:"Plantilla Footer"}},[a("ValidationProvider",{attrs:{name:"plantilla footer",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[a("el-select",{attrs:{filterable:"",placeholder:"Seleccionar plantilla Footer"},model:{value:e.pageStore.formNode.keyNameTemplateFooter,callback:function(t){e.$set(e.pageStore.formNode,"keyNameTemplateFooter",t)},expression:"pageStore.formNode.keyNameTemplateFooter"}},e._l(e.pageStore.footerOptions,(function(e){return a("el-option",{key:e.keyName,attrs:{label:e.title,value:e.keyName}})})),1),a("span",[e._v(e._s(n[0]))])]}}],null,!0)})],1),a("el-form-item",{attrs:{label:"Clase",placeholder:"Clase para body"}},[a("ValidationProvider",{attrs:{name:"clases",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[a("el-input",{model:{value:e.pageStore.formNode.clase,callback:function(t){e.$set(e.pageStore.formNode,"clase",t)},expression:"pageStore.formNode.clase"}}),a("span",[e._v(e._s(n[0]))])]}}],null,!0)})],1),a("el-form-item",{attrs:{label:"Tipo"}},[a("ValidationProvider",{attrs:{name:"tipo",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[a("el-select",{attrs:{filterable:"",placeholder:"Seleccionar tipo"},model:{value:e.pageStore.formNode.type,callback:function(t){e.$set(e.pageStore.formNode,"type",t)},expression:"pageStore.formNode.type"}},e._l(e.pageStore.typeOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),a("span",[e._v(e._s(n[0]))])]}}],null,!0)})],1),"redirect"==e.pageStore.formNode.type?a("el-form-item",{attrs:{label:"URL Redirección"}},[a("ValidationProvider",{attrs:{name:"URL Redirección",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[a("el-input",{model:{value:e.pageStore.formNode.urlRedirect,callback:function(t){e.$set(e.pageStore.formNode,"urlRedirect",t)},expression:"pageStore.formNode.urlRedirect"}},[a("template",{slot:"prepend"},[e._v("URL:")])],2),a("span",[e._v(e._s(n[0]))])]}}],null,!0)})],1):e._e(),a("el-form-item",{attrs:{label:"Target link"}},[a("ValidationProvider",{attrs:{name:"Target",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[a("el-select",{attrs:{filterable:"",placeholder:"Seleccionar Target"},model:{value:e.pageStore.formNode.target,callback:function(t){e.$set(e.pageStore.formNode,"target",t)},expression:"pageStore.formNode.target"}},e._l(e.pageStore.targetOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),a("span",[e._v(e._s(n[0]))])]}}],null,!0)})],1),a("el-form-item",{attrs:{label:"Visible menú"}},[a("el-switch",{model:{value:e.pageStore.formNode.isVisible,callback:function(t){e.$set(e.pageStore.formNode,"isVisible",t)},expression:"pageStore.formNode.isVisible"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"danger",icon:"el-icon-back"},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.onFormCancel.apply(null,arguments)}}},[e._v(" Cancelar")]),e.pageStore.formNode.isEdit?a("el-button",{attrs:{type:"success",icon:"el-icon-circle-plus-outline",disabled:n},on:{click:function(t){t.stopPropagation(),t.preventDefault(),e.pageStore.isSubNode?e.createSubNode():e.createNode()}}},[e._v(" Guardar formnode")]):a("el-button",{attrs:{type:"success",icon:"el-icon-circle-plus-outline",disabled:n},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.editNode.apply(null,arguments)}}},[e._v(" Actualizar")])],1)],1)]}}])})],1)])],1)},V=[],E=(a("159b"),Object(c["a"])()),F=Object(i["a"])(),$=Object(l["a"])(),B=k(),R={name:"formNode",data:function(){return{pageStore:E,siteStore:F,configStore:$,formSiteMap:{},form:{},list:null,data:null}},created:function(){},methods:{createNode:function(){var e=this;return Object(s["a"])(Object(o["a"])().mark((function t(){var a,n;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(E.loading=!0,0!==E.list.length){t.next=8;break}return e.formSiteMap=S.a.cloneDeep(B.templateSiteMap),t.next=5,F.showKeyName().then((function(t){e.formSiteMap.keyNameSite=S.a.cloneDeep(t.keyName)}));case 5:return e.formSiteMap.lang=S.a.cloneDeep($.langSelected),t.next=8,B.storeSiteMap(e.formSiteMap);case 8:return delete E.formNode.isEdit,E.list.push(E.formNode),a=S.a.cloneDeep(E.list),n=S.a.cloneDeep($.langSelected),t.next=14,B.updateSiteMap(a,n).then((function(t){E.list=t.map,E.isFormVisible=!1,e.$router.push({name:"pages.edit.content",params:{keyName:E.formNode.keyNamePage}})})).finally((function(){return E.loading=!1}));case 14:case"end":return t.stop()}}),t)})))()},createSubNode:function(){var e=this;return Object(s["a"])(Object(o["a"])().mark((function t(){var a,n,r;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return E.loading=!0,a=S.a.cloneDeep(E.formNode),E.data.children||e.$set(E.data,"children",[]),E.data.children.push(a),n=S.a.cloneDeep(E.list),r=S.a.cloneDeep($.langSelected),t.next=8,B.updateSiteMap(n,r).then((function(e){E.list=e.map,E.isFormVisible=!1})).finally((function(){return E.loading=!1}));case 8:case"end":return t.stop()}}),t)})))()},editNode:function(){return Object(s["a"])(Object(o["a"])().mark((function e(){var t,a,n,r;return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return E.loading=!0,t=E.node.parent.id,a=E.node.id,t>0?E.list.forEach((function(e){e.$treeNodeId===t&&e.children.forEach((function(e){e.$treeNodeId===a&&(e=E.formNode)}))})):E.list.forEach((function(e){e.$treeNodeId===a&&(e=E.formNode)})),n=S.a.cloneDeep(E.list),r=S.a.cloneDeep($.langSelected),e.next=8,B.updateSiteMap(n,r).then((function(e){E.list=e.map,E.isFormVisible=!1})).finally((function(){return E.loading=!1}));case 8:case"end":return e.stop()}}),e)})))()},onFormCancel:function(){E.isFormVisible=!1}}},q=R,z=Object(T["a"])(q,D,V,!1,null,null,null),H=z.exports,I=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("ValidationObserver",{ref:"form",scopedSlots:e._u([{key:"default",fn:function(t){var n=t.invalid;return[a("el-form",{attrs:{"label-position":"top","label-width":"120px",model:e.formPage}},[a("el-form-item",{attrs:{label:"Título",placeholder:"Título pagina"}},[a("ValidationProvider",{attrs:{name:"título página",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[a("el-input",{model:{value:e.formPage.menuTitle,callback:function(t){e.$set(e.formPage,"menuTitle",t)},expression:"formPage.menuTitle"}}),a("span",[e._v(e._s(n[0]))])]}}],null,!0)})],1),a("el-form-item",{attrs:{label:"keyName",placeholder:"keyName"}},[a("ValidationProvider",{attrs:{name:"keyName",rules:"uniqueKeyNamePage|required"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[a("el-input",{model:{value:e.formPage.keyName,callback:function(t){e.$set(e.formPage,"keyName",t)},expression:"formPage.keyName"}}),a("span",[e._v(e._s(n[0]))])]}}],null,!0)})],1),a("el-form-item",[a("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",disabled:n},on:{click:function(t){return e.createPage()}}},[e._v("Crear")])],1)],1)]}}])})],1)},L=[],U=Object(c["a"])(),J=Object(l["a"])(),A={name:"form-page",data:function(){return{pageStore:U,configStore:J,formPage:{}}},created:function(){this.formPage=S.a.cloneDeep(U.templatePage)},methods:{createPage:function(){var e=this;return Object(s["a"])(Object(o["a"])().mark((function t(){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return U.loading=!0,e.formPage.lang=J.langSelected,U.formNode=S.a.cloneDeep(U.templateNode),U.formNode.isEdit=!0,t.next=6,U.storePage(e.formPage).then((function(t){U.formNode.keyNamePage=S.a.cloneDeep(t.keyName),U.formNode.menuTitle=S.a.cloneDeep(e.formPage.menuTitle)})).finally((function(){return U.loading=!1}));case 6:U.dialogVisibleNode=!1,U.isFormVisible=!0;case 8:case"end":return t.stop()}}),t)})))()}}},K=A,G=Object(T["a"])(K,I,L,!1,null,null,null),Q=G.exports,W=Object(c["a"])(),X=Object(i["a"])(),Y=Object(l["a"])(),Z=Object(u["a"])(),ee=k(),te={components:{menuButtons:M,formNode:H,formPage:Q},data:function(){return{configStore:Y,pageStore:W,siteStore:X,templateStore:Z,siteMapStore:ee,form:null,node:null,data:null,list:[],lastNode:0,siteMaps:null,defaultProps:{label:"menuTitle",children:"children"}}},created:function(){var e=this;return Object(s["a"])(Object(o["a"])().mark((function t(){var a;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return W.isFormVisible=!1,a=S.a.cloneDeep(Y.langSelected),t.next=4,ee.showSiteMap(a).then((function(e){void 0!==e&&void 0!==e.map&&(W.list=e.map)}));case 4:e.fetchTemplates();case 5:case"end":return t.stop()}}),t)})))()},methods:{fetchTemplates:function(){return Object(s["a"])(Object(o["a"])().mark((function e(){var t,a,n,r,s,i;return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return Z.typeTemplate="main",t=S.a.cloneDeep(Z.filterForm),a=S.a.cloneDeep(Z.typeTemplate),e.next=5,Z.indexTemplate(t,a).then((function(e){W.mainOptions=e}));case 5:return Z.typeTemplate="header",n=S.a.cloneDeep(Z.filterForm),r=S.a.cloneDeep(Z.typeTemplate),e.next=10,Z.indexTemplate(n,r).then((function(e){W.headerOptions=e}));case 10:return Z.typeTemplate="footer",s=S.a.cloneDeep(Z.filterForm),i=S.a.cloneDeep(Z.typeTemplate),e.next=15,Z.indexTemplate(s,i).then((function(e){W.footerOptions=e}));case 15:case"end":return e.stop()}}),e)})))()},seeFormPage:function(){W.isSubNode=!1,W.dialogVisibleNode=!0,W.formPage=S.a.cloneDeep(W.templatePage)},seeFormInternalPage:function(e,t){W.isSubNode=!0,W.dialogVisibleNode=!0,W.formPage=S.a.cloneDeep(W.templatePage),W.data=t,W.node=e},removeNode:function(e,t){var a=this;this.$confirm("Se borrara la plantilla, ¿Esta seguro?","Cuidado",{confirmButtonText:"OK",cancelButtonText:"Cancelar",type:"warning"}).then((function(){W.loading=!0;var a=e.parent,n=a.data.children||a.data,r=S.a.cloneDeep(t.keyNamePage),o=n.findIndex((function(e){return e.keyNamePage===t.keyNamePage}));n.splice(o,1);var s=S.a.cloneDeep(W.list),i=S.a.cloneDeep(Y.langSelected);ee.updateSiteMap(s,i).then((function(e){W.list=e.map,W.deletePage(r),W.isFormVisible=!1})).finally((function(){return W.loading=!1}))})).catch((function(){a.$message({showClose:!0,type:"info",message:"Se cancelo la operación"})}))},onChangeLang:function(e){return Object(s["a"])(Object(o["a"])().mark((function t(){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return Y.setLangSelected(e),t.next=3,ee.indexSiteMap().then((function(e){W.list=e}));case 3:W.list.some((function(e){return e.lang===Y.langSelected?(W.list=e.map,!0):(W.list=[],!1)}));case 4:case"end":return t.stop()}}),t)})))()},viewMenuSettings:function(e,t){W.dialogVisible=!0,W.node=e,W.data=t},doubleClick:function(e,t){var a="",n=!1;if(t.level>1){var r=t.parent,o=t.level;o>2&&(n=!0);while(o>0)a=r.data.slug+a,r=r.parent,o=r.level;n&&(a+="/")}t.checked?t.id!==this.lastNode||W.dialogVisible?this.lastNode=t.id:(W.data=e,W.node=t,W.formNode=W.data,W.formNode.isEdit=!1,W.formNode.slugComplete=a,W.isFormVisible=!0,W.dialogVisible=!1,t.checked=!1,this.lastNode=0):(t.checked=!0,this.lastNode=t.id)},onSaveTree:function(){return Object(s["a"])(Object(o["a"])().mark((function e(){var t,a;return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return W.loading=!0,t=S.a.cloneDeep(W.list),a=S.a.cloneDeep(Y.langSelected),e.next=5,ee.updateSiteMap(t,a).then((function(e){W.list=e.map})).finally((function(){return W.loading=!1}));case 5:case"end":return e.stop()}}),e)})))()}}},ae=te,ne=(a("a644"),Object(T["a"])(ae,n,r,!1,null,"560aca9e",null));t["default"]=ne.exports},"536c":function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var n=a("c7eb"),r=a("1da1"),o=(a("d3b7"),a("be92")),s=a("5c96"),i=a("2ef0"),l=a.n(i),c=a("6040"),u=Object(o["c"])("template",{state:function(){return{isEdit:!1,loading:!1,dialogVisible:!1,isFile:!0,sizePerPage:25,totalPages:"",totalItemPage:"",currentPage:"",contentHtml:"",filterDateRegisterRange:"",filterForm:{query:"",initDate:"",endDate:""},keyName:"",typeTemplate:"",templateBlank:{title:"",keyName:"",type:"",content:"<p>Template</p>"},form:{},list:null,template:{},file:{name:"",pathFile:"",type:"",order:0},isVisibleNavBar:!0,dialogTitle:"",isJavascript:!1,editor:{},pickerOptions:{shortcuts:[{text:"Semana pasada",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"Mes pasado",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"3 Meses atrás",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}},{text:"6 Meses atrás",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-15552e6),e.$emit("pick",[a,t])}},{text:"9 Meses atrás",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-23328e6),e.$emit("pick",[a,t])}},{text:"1 Año atrás",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-31536e6),e.$emit("pick",[a,t])}}]}}},actions:{indexTemplate:function(e,t){var a=this;return Object(r["a"])(Object(n["a"])().mark((function r(){return Object(n["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a.loading=!0,n.next=3,Object(c["c"])(e,t).then((function(e){return e.success?(a.list=e.data.data,a.totalPages=e.data.total,a.list):(Object(s["Message"])({showClose:!0,message:e.messages[0]||"Error",type:"danger"}),!1)})).catch((function(e){console.log("responseCatch -> data",e)})).finally((function(){return a.loading=!1}));case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),r)})))()},showTemplate:function(e){var t=this;return Object(r["a"])(Object(n["a"])().mark((function a(){return Object(n["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.loading=!0,a.next=3,Object(c["d"])(e).then((function(e){return e.success?(Object(s["Message"])({showClose:!0,message:e.messages[0]||"Exito",type:"success"}),t.form=e.data,t.form):(Object(s["Message"])({showClose:!0,message:e.messages[0]||"Error",type:"danger"}),!1)})).catch((function(e){console.log("responseCatch -> data",e)})).finally((function(){return t.loading=!1}));case 3:return a.abrupt("return",a.sent);case 4:case"end":return a.stop()}}),a)})))()},storeTemplate:function(e){var t=this;return Object(r["a"])(Object(n["a"])().mark((function a(){return Object(n["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.loading=!0,a.next=3,Object(c["e"])(e).then((function(e){return t.template=e.data,e.success?(Object(s["Message"])({showClose:!0,message:e.messages[0]||"Exito",type:"success"}),t.template):(Object(s["Message"])({showClose:!0,message:e.messages[0]||"Error",type:"danger"}),!1)})).catch((function(e){console.log("responseCatch -> data",e)})).finally((function(){return t.loading=!1}));case 3:return a.abrupt("return",a.sent);case 4:case"end":return a.stop()}}),a)})))()},updateTemplate:function(e,t){var a=this;return Object(r["a"])(Object(n["a"])().mark((function r(){return Object(n["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a.loading=!0,n.next=3,Object(c["f"])(e,t).then((function(e){return e.success?(Object(s["Message"])({showClose:!0,message:e.messages[0]||"Exito",type:"success"}),a.form=e.data,a.form):(Object(s["Message"])({showClose:!0,message:e.messages[0]||"Error",type:"danger"}),!1)})).catch((function(e){console.log("responseCatch -> data",e)})).finally((function(){return a.loading=!1}));case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),r)})))()},deleteTemplate:function(e){var t=this;return Object(r["a"])(Object(n["a"])().mark((function a(){return Object(n["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.loading=!0,a.next=3,Object(c["a"])(e).then((function(e){return e.success?(Object(s["Message"])({showClose:!0,message:e.messages[0]||"Exito",type:"success"}),t.list=e.data,t.list):(Object(s["Message"])({showClose:!0,message:e.messages[0]||"Error",type:"danger"}),!1)})).catch((function(e){console.log("responseCatch -> data",e)})).finally((function(){return t.loading=!1}));case 3:return a.abrupt("return",a.sent);case 4:case"end":return a.stop()}}),a)})))()},updateContentHtml:function(e,t){return Object(r["a"])(Object(n["a"])().mark((function a(){return Object(n["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(c["g"])({content:e},t).then((function(e){return e.success?(Object(s["Message"])({showClose:!0,message:e.messages[0]||"Exito",type:"success"}),e.data):(Object(s["Message"])({showClose:!0,message:e.messages[0]||"Error",type:"danger"}),!1)})).catch((function(e){console.log("responseCatch -> data",e)}));case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}}),a)})))()},handleCreate:function(e,t){this.isEdit=!1,this.dialogVisible=!0,this.form=l.a.cloneDeep(this.templateBlank)},handleClose:function(e){s["MessageBox"].confirm("Estas deacuerdo en cerrar la ventana?").then((function(t){e()})).catch((function(e){}))},handleCurrentChange:function(e){var t=this;return Object(r["a"])(Object(n["a"])().mark((function a(){var r;return Object(n["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.currentPage=e,t.loading=!0,r=l.a.cloneDeep(t.typeTemplate),a.next=5,Object(c["b"])(r,e,t.sizePerPage).then((function(e){t.list=e.data.data,t.totalPages=e.data.total})).catch(t.responseCatch).finally((function(){return t.loading=!1}));case 5:case"end":return a.stop()}}),a)})))()},handleChangeItemPage:function(e){var t=this;return Object(r["a"])(Object(n["a"])().mark((function a(){var r;return Object(n["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.loading=!0,t.sizePerPage=e,r=l.a.cloneDeep(t.typeTemplate),a.next=5,Object(c["b"])(r,t.currentPage,e).then((function(e){t.list=e.data.data,t.totalPages=e.data.total})).catch(t.responseCatch).finally((function(){return t.loading=!1}));case 5:case"end":return a.stop()}}),a)})))()},handleFilterDateRegister:function(){this.filterDateRegisterRange?(this.filterForm.initDate=this.filterDateRegisterRange[0],this.filterForm.endDate=this.filterDateRegisterRange[1],this.handleSearchFilter()):(this.filterForm.initDate="",this.filterForm.endDate="",this.handleSearchFilter())},handleClean:function(){this.filterForm.query="",this.filterForm.initDate="",this.filterForm.endDate="",this.handleSearchFilter()},handleSearchFilter:function(){var e=this;return Object(r["a"])(Object(n["a"])().mark((function t(){return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,e.indexTemplate(e.filterForm,e.typeTemplate).finally((function(){return e.loading=!1}));case 3:case"end":return t.stop()}}),t)})))()},showNavBar:function(){this.isVisibleNavBar?this.isVisibleNavBar=!1:this.isVisibleNavBar=!0}}})},"770b":function(e,t,a){"use strict";a("dbde")},9057:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var n=a("c7eb"),r=a("1da1"),o=(a("d3b7"),a("be92")),s=a("5c96"),i=a("2ef0"),l=a.n(i),c=a("773c"),u=a("35a4"),p=Object(u["a"])(),d=Object(o["c"])("page",{state:function(){return{configStore:p,isEdit:!1,isFile:!0,isSubNode:!1,isFormVisible:!1,loading:!1,dialogVisible:!1,dialogVisibleNode:!1,contentHtml:"",keyName:"",form:{},formNode:{},formPage:{},list:[],listPages:null,data:null,node:null,file:{name:"",pathFile:"",type:"",order:0},isVisibleNavBar:!0,dialogTitle:"",isJavascript:!1,editor:{},headerOptions:[],footerOptions:[],mainOptions:[],templateNode:{keyNamePage:"",menuTitle:"Nueva página",slug:"",keyNameTemplateMain:"",keyNameTemplateHeader:"",keyNameTemplateFooter:"",type:"page",urlRedirec:"http://",target:"_self",isVisible:!0},templatePage:{keyName:"",menuTitle:"",lang:"",content:""},targetOptions:[{label:"Misma ventana o tab",value:"_self"},{label:"Nueva ventana o tab",value:"_blank"},{label:"Ventana padre",value:"_parent"},{label:"Ventana principal",value:"_top"}],typeOptions:[{label:"Página",value:"page"},{label:"Redirección",value:"redirect"}]}},actions:{indexPages:function(){var e=this;return Object(r["a"])(Object(n["a"])().mark((function t(){return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,Object(c["b"])().then((function(t){return t.success?(Object(s["Message"])({showClose:!0,message:t.messages[0]||"Exito",type:"success"}),e.listPages=t.data,e.listPages):(Object(s["Message"])({showClose:!0,message:t.messages[0]||"Error",type:"danger"}),!1)})).catch((function(e){console.log("responseCatch -> data",e)})).finally((function(){return e.loading=!1}));case 3:case"end":return t.stop()}}),t)})))()},showPage:function(e){var t=this;return Object(r["a"])(Object(n["a"])().mark((function a(){return Object(n["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.loading=!0,a.next=3,Object(c["c"])(e).then((function(e){return e.success?(Object(s["Message"])({showClose:!0,message:e.messages[0]||"Exito",type:"success"}),t.form=e.data,t.form):(Object(s["Message"])({showClose:!0,message:e.messages[0]||"Error",type:"danger"}),!1)})).catch((function(e){console.log("responseCatch -> data",e)})).finally((function(){return t.loading=!1}));case 3:case"end":return a.stop()}}),a)})))()},storePage:function(e){var t=this;return Object(r["a"])(Object(n["a"])().mark((function a(){return Object(n["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.loading=!0,a.next=3,Object(c["d"])(e).then((function(e){return e.success?(Object(s["Message"])({showClose:!0,message:e.messages[0]||"Exito",type:"success"}),t.form=e.data,t.form):(Object(s["Message"])({showClose:!0,message:e.messages[0]||"Error",type:"danger"}),!1)})).catch((function(e){console.log("responseCatch -> data",e)})).finally((function(){return t.loading=!1}));case 3:return a.abrupt("return",a.sent);case 4:case"end":return a.stop()}}),a)})))()},updatePage:function(e,t){var a=this;return Object(r["a"])(Object(n["a"])().mark((function r(){return Object(n["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a.loading=!0,n.next=3,Object(c["e"])(e,t).then((function(e){return e.success?(Object(s["Message"])({showClose:!0,message:e.messages[0]||"Exito",type:"success"}),a.form=e.data,a.form):(Object(s["Message"])({showClose:!0,message:e.messages[0]||"Error",type:"danger"}),!1)})).catch((function(e){console.log("responseCatch -> data",e)})).finally((function(){return a.loading=!1}));case 3:case"end":return n.stop()}}),r)})))()},deletePage:function(e){var t=this;return Object(r["a"])(Object(n["a"])().mark((function a(){return Object(n["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.loading=!0,a.next=3,Object(c["a"])(e).then((function(e){return e.success?(Object(s["Message"])({showClose:!0,message:e.messages[0]||"Exito",type:"success"}),t.form=e,t.form):(Object(s["Message"])({showClose:!0,message:e.messages[0]||"Error",type:"danger"}),!1)})).catch((function(e){console.log("responseCatch -> data",e)})).finally((function(){return t.loading=!1}));case 3:case"end":return a.stop()}}),a)})))()},updateContentHtml:function(e,t){return Object(r["a"])(Object(n["a"])().mark((function a(){return Object(n["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(c["f"])({content:e},t).then((function(e){return e.success?(Object(s["Message"])({showClose:!0,message:e.messages[0]||"Exito",type:"success"}),e.data):(Object(s["Message"])({showClose:!0,message:e.messages[0]||"Error",type:"danger"}),!1)})).catch((function(e){console.log("responseCatch -> data",e)}));case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}}),a)})))()},handleCreateMenu:function(e,t){this.isEdit=!1,this.dialogVisible=!0,this.form=l.a.cloneDeep(this.templateBlank)},handleCreateNode:function(e,t){this.form=l.a.cloneDeep(this.templateBlank)},handleClose:function(e){s["MessageBox"].confirm("Estas deacuerdo en cerrar la ventana?").then((function(t){e()})).catch((function(e){}))},showNavBar:function(){this.isVisibleNavBar=!this.isVisibleNavBar}}})},a644:function(e,t,a){"use strict";a("cc90")},cc90:function(e,t,a){},dbde:function(e,t,a){}}]);
//# sourceMappingURL=chunk-05f5db76.329a2351.js.map