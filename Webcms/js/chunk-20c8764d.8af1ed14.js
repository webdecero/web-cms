(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-20c8764d"],{"147a":function(e,t,a){"use strict";a("b408")},"25d2":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.templateStore.loading,expression:"templateStore.loading"}],attrs:{gutter:10,type:"flex",justify:"center","element-loading-text":"Cargando..."}},[a("el-col",{attrs:{xs:22,sm:22,md:19,lg:19,xl:19}},[a("div",[a("ValidationObserver",{ref:"form",scopedSlots:e._u([{key:"default",fn:function(t){var n=t.invalid;return[a("el-form",{attrs:{"label-position":"top","label-width":"100px",model:e.templateStore.form}},[a("el-form-item",{attrs:{label:"Titulo"}},[a("ValidationProvider",{attrs:{name:"titulo",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[a("el-input",{attrs:{size:"mini"},model:{value:e.templateStore.form.title,callback:function(t){e.$set(e.templateStore.form,"title",t)},expression:"templateStore.form.title"}}),a("span",[e._v(e._s(n[0]))])]}}],null,!0)})],1),a("el-form-item",{attrs:{label:"KeyName"}},[e.templateStore.isEdit?a("div",[a("ValidationProvider",{attrs:{name:"keyName",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[a("el-input",{attrs:{size:"mini",disabled:!0},model:{value:e.templateStore.form.keyName,callback:function(t){e.$set(e.templateStore.form,"keyName",t)},expression:"templateStore.form.keyName"}}),a("span",[e._v(e._s(n[0]))])]}}],null,!0)})],1):a("div",[a("ValidationProvider",{attrs:{name:"keyName",rules:"uniqueKeyNameTemplate|required"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[a("el-input",{attrs:{size:"mini"},model:{value:e.templateStore.form.keyName,callback:function(t){e.$set(e.templateStore.form,"keyName",t)},expression:"templateStore.form.keyName"}}),a("span",[e._v(e._s(n[0]))])]}}],null,!0)})],1)]),a("el-form-item",[a("div",{attrs:{align:"right"}},[a("el-button",{attrs:{type:"danger",size:"medium"},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.handleCancel.apply(null,arguments)}}},[e._v(" Cancelar")]),a("el-button",{attrs:{type:e.templateStore.isEdit?"primary":"success",size:"medium",disabled:n},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.checkSave.apply(null,arguments)}}},[e._v(" "+e._s(e.templateStore.isEdit?"Actualizar":"Crear"))])],1)])],1)]}}])})],1)])],1)},r=[],i=a("c7eb"),s=a("1da1"),o=a("536c"),l=a("35a4"),c=a("2ef0"),u=a.n(c),p=Object(l["a"])(),m=Object(o["a"])(),d={name:"Settings",data:function(){return{isUpdateForm:!1,valueLang:"",configStore:p,templateStore:m}},created:function(){return Object(s["a"])(Object(i["a"])().mark((function e(){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},methods:{checkSave:function(){var e=this;return Object(s["a"])(Object(i["a"])().mark((function t(){var a,n,r;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!m.isEdit){t.next=6;break}a=u.a.cloneDeep(m.form),n=u.a.cloneDeep(m.keyName),m.updateTemplate(n,a),t.next=10;break;case 6:return m.form.type=m.typeTemplate,r=u.a.cloneDeep(m.form),t.next=10,m.storeTemplate(r).then((function(t){var a=u.a.cloneDeep(t.keyName);"main"===m.typeTemplate?e.$router.push({name:"main.edit.content",params:{keyName:a}}):"header"===m.typeTemplate?e.$router.push({name:"header.edit.content",params:{keyName:a}}):"footer"===m.typeTemplate&&e.$router.push({name:"footer.edit.content",params:{keyName:a}}),m.dialogVisible=!1}));case 10:case"end":return t.stop()}}),t)})))()},handleCancel:function(){m.dialogVisible?m.dialogVisible=!1:this.returnToIndex()},returnToIndex:function(){"main"===m.typeTemplate?this.$router.push({name:"main.index"}):"header"===m.typeTemplate?this.$router.push({name:"header.index"}):"footer"===m.typeTemplate&&this.$router.push({name:"footer.index"})}}},f=d,g=(a("147a"),a("2877")),h=Object(g["a"])(f,n,r,!1,null,"32ded5b7",null);t["a"]=h.exports},"536c":function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var n=a("c7eb"),r=a("1da1"),i=(a("d3b7"),a("be92")),s=a("5c96"),o=a("2ef0"),l=a.n(o),c=a("6040"),u=Object(i["c"])("template",{state:function(){return{isEdit:!1,loading:!1,dialogVisible:!1,isFile:!0,sizePerPage:25,totalPages:"",totalItemPage:"",currentPage:"",contentHtml:"",filterDateRegisterRange:"",filterForm:{query:"",initDate:"",endDate:""},keyName:"",typeTemplate:"",templateBlank:{title:"",keyName:"",type:"",content:"<p>Template</p>"},form:{},list:null,template:{},file:{name:"",pathFile:"",type:"",order:0},isVisibleNavBar:!0,dialogTitle:"",isJavascript:!1,editor:{},pickerOptions:{shortcuts:[{text:"Semana pasada",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"Mes pasado",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"3 Meses atrás",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}},{text:"6 Meses atrás",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-15552e6),e.$emit("pick",[a,t])}},{text:"9 Meses atrás",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-23328e6),e.$emit("pick",[a,t])}},{text:"1 Año atrás",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-31536e6),e.$emit("pick",[a,t])}}]}}},actions:{indexTemplate:function(e,t){var a=this;return Object(r["a"])(Object(n["a"])().mark((function r(){return Object(n["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a.loading=!0,n.next=3,Object(c["c"])(e,t).then((function(e){return e.success?(a.list=e.data.data,a.totalPages=e.data.total,a.list):(Object(s["Message"])({showClose:!0,message:e.messages[0]||"Error",type:"danger"}),!1)})).catch((function(e){console.log("responseCatch -> data",e)})).finally((function(){return a.loading=!1}));case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),r)})))()},showTemplate:function(e){var t=this;return Object(r["a"])(Object(n["a"])().mark((function a(){return Object(n["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.loading=!0,a.next=3,Object(c["d"])(e).then((function(e){return e.success?(Object(s["Message"])({showClose:!0,message:e.messages[0]||"Exito",type:"success"}),t.form=e.data,t.form):(Object(s["Message"])({showClose:!0,message:e.messages[0]||"Error",type:"danger"}),!1)})).catch((function(e){console.log("responseCatch -> data",e)})).finally((function(){return t.loading=!1}));case 3:return a.abrupt("return",a.sent);case 4:case"end":return a.stop()}}),a)})))()},storeTemplate:function(e){var t=this;return Object(r["a"])(Object(n["a"])().mark((function a(){return Object(n["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.loading=!0,a.next=3,Object(c["e"])(e).then((function(e){return t.template=e.data,e.success?(Object(s["Message"])({showClose:!0,message:e.messages[0]||"Exito",type:"success"}),t.template):(Object(s["Message"])({showClose:!0,message:e.messages[0]||"Error",type:"danger"}),!1)})).catch((function(e){console.log("responseCatch -> data",e)})).finally((function(){return t.loading=!1}));case 3:return a.abrupt("return",a.sent);case 4:case"end":return a.stop()}}),a)})))()},updateTemplate:function(e,t){var a=this;return Object(r["a"])(Object(n["a"])().mark((function r(){return Object(n["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a.loading=!0,n.next=3,Object(c["f"])(e,t).then((function(e){return e.success?(Object(s["Message"])({showClose:!0,message:e.messages[0]||"Exito",type:"success"}),a.form=e.data,a.form):(Object(s["Message"])({showClose:!0,message:e.messages[0]||"Error",type:"danger"}),!1)})).catch((function(e){console.log("responseCatch -> data",e)})).finally((function(){return a.loading=!1}));case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),r)})))()},deleteTemplate:function(e){var t=this;return Object(r["a"])(Object(n["a"])().mark((function a(){return Object(n["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.loading=!0,a.next=3,Object(c["a"])(e).then((function(e){return e.success?(Object(s["Message"])({showClose:!0,message:e.messages[0]||"Exito",type:"success"}),t.list=e.data,t.list):(Object(s["Message"])({showClose:!0,message:e.messages[0]||"Error",type:"danger"}),!1)})).catch((function(e){console.log("responseCatch -> data",e)})).finally((function(){return t.loading=!1}));case 3:return a.abrupt("return",a.sent);case 4:case"end":return a.stop()}}),a)})))()},updateContentHtml:function(e,t){return Object(r["a"])(Object(n["a"])().mark((function a(){return Object(n["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(c["g"])({content:e},t).then((function(e){return e.success?(Object(s["Message"])({showClose:!0,message:e.messages[0]||"Exito",type:"success"}),e.data):(Object(s["Message"])({showClose:!0,message:e.messages[0]||"Error",type:"danger"}),!1)})).catch((function(e){console.log("responseCatch -> data",e)}));case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}}),a)})))()},handleCreate:function(e,t){this.isEdit=!1,this.dialogVisible=!0,this.form=l.a.cloneDeep(this.templateBlank)},handleClose:function(e){s["MessageBox"].confirm("Estas deacuerdo en cerrar la ventana?").then((function(t){e()})).catch((function(e){}))},handleCurrentChange:function(e){var t=this;return Object(r["a"])(Object(n["a"])().mark((function a(){var r;return Object(n["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.currentPage=e,t.loading=!0,r=l.a.cloneDeep(t.typeTemplate),a.next=5,Object(c["b"])(r,e,t.sizePerPage).then((function(e){t.list=e.data.data,t.totalPages=e.data.total})).catch(t.responseCatch).finally((function(){return t.loading=!1}));case 5:case"end":return a.stop()}}),a)})))()},handleChangeItemPage:function(e){var t=this;return Object(r["a"])(Object(n["a"])().mark((function a(){var r;return Object(n["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.loading=!0,t.sizePerPage=e,r=l.a.cloneDeep(t.typeTemplate),a.next=5,Object(c["b"])(r,t.currentPage,e).then((function(e){t.list=e.data.data,t.totalPages=e.data.total})).catch(t.responseCatch).finally((function(){return t.loading=!1}));case 5:case"end":return a.stop()}}),a)})))()},handleFilterDateRegister:function(){this.filterDateRegisterRange?(this.filterForm.initDate=this.filterDateRegisterRange[0],this.filterForm.endDate=this.filterDateRegisterRange[1],this.handleSearchFilter()):(this.filterForm.initDate="",this.filterForm.endDate="",this.handleSearchFilter())},handleClean:function(){this.filterForm.query="",this.filterForm.initDate="",this.filterForm.endDate="",this.handleSearchFilter()},handleSearchFilter:function(){var e=this;return Object(r["a"])(Object(n["a"])().mark((function t(){return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,e.indexTemplate(e.filterForm,e.typeTemplate).finally((function(){return e.loading=!1}));case 3:case"end":return t.stop()}}),t)})))()},showNavBar:function(){this.isVisibleNavBar?this.isVisibleNavBar=!1:this.isVisibleNavBar=!0}}})},b408:function(e,t,a){},e646:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-row",{staticClass:"margin-bottom-20"},[a("el-col",{attrs:{lg:16,xs:16,offset:0}},[a("el-input",{attrs:{"prefix-icon":"el-icon-search",size:"mini",placeholder:"Nombre, mensaje...",clearable:""},on:{change:function(t){return e.templateStore.handleSearchFilter()}},model:{value:e.templateStore.filterForm.query,callback:function(t){e.$set(e.templateStore.filterForm,"query",t)},expression:"templateStore.filterForm.query"}})],1),a("el-col",{attrs:{lg:2,xs:8,offset:0}},[a("el-button",{staticClass:"margin-left-10",attrs:{size:"mini",type:"primary",icon:"el-icon-search"},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.templateStore.handleSearchFilter.apply(null,arguments)}}},[e._v("Buscar")])],1),a("el-col",{attrs:{lg:2,xs:8,offset:0}},[a("el-button",{staticClass:"margin-left-10",attrs:{size:"mini",type:"warning",icon:"el-icon-delete"},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.templateStore.handleClean.apply(null,arguments)}}},[e._v("Limpiar")])],1),a("el-col",{attrs:{lg:2,xs:8,offset:0}},[a("el-button",{staticClass:"margin-left-10",attrs:{size:"mini",type:"success",icon:"el-icon-plus"},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.templateStore.handleCreate.apply(null,arguments)}}},[e._v("Nuevo")])],1)],1),[a("el-dialog",{staticStyle:{padding:"30px"},attrs:{title:"Crear Plantilla Main",visible:e.templateStore.dialogVisible,width:"30%","before-close":e.templateStore.handleClose},on:{"update:visible":function(t){return e.$set(e.templateStore,"dialogVisible",t)}}},[a("settings")],1)],a("el-row",{attrs:{type:"flex",justify:"end"}},[a("el-pagination",{attrs:{"page-sizes":[25,50,100,200],"page-size":25,layout:"total,sizes,prev, pager, next",total:parseInt(e.templateStore.totalPages)},on:{"size-change":e.templateStore.handleChangeItemPage,"current-change":e.templateStore.handleCurrentChange}})],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.templateStore.loading,expression:"templateStore.loading"}],staticStyle:{width:"100%"},attrs:{size:"mini",data:e.templateStore.list,"element-loading-text":"Cargando...",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{label:"Nombre",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.title))])]}}])}),a("el-table-column",{attrs:{label:"Registro",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("formatDate")(t.row.created_at))+" ")]}}])}),a("el-table-column",{attrs:{fixed:"right",label:"Opciones",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.configEdit(t.$index,t.row)}}},[e._v("Editar configuraciones")]),a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.contentEdit(t.$index,t.row)}}},[e._v("Editar contenido")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("Eliminar")])]}}])})],1),a("el-row",{attrs:{type:"flex",justify:"end"}},[a("el-pagination",{attrs:{"page-sizes":[25,50,100,200],"page-size":25,layout:"total,sizes,prev, pager, next",total:parseInt(e.templateStore.totalPages)},on:{"size-change":e.templateStore.handleChangeItemPage,"current-change":e.templateStore.handleCurrentChange}})],1)],2)},r=[],i=(a("a434"),a("536c")),s=a("25d2"),o=a("2ef0"),l=a.n(o),c=Object(i["a"])(),u={components:{settings:s["a"]},data:function(){return{templateStore:c,res:!1}},created:function(){c.typeTemplate="main";var e=l.a.cloneDeep(c.typeTemplate),t=l.a.cloneDeep(c.filterForm);c.indexTemplate(t,e)},methods:{configEdit:function(e,t){this.$router.push({name:"main.edit.config",params:{keyName:t.keyName,typeTemplate:"main"}})},contentEdit:function(e,t){this.$router.push({name:"main.edit.content",params:{keyName:t.keyName}})},handleDelete:function(e,t){var a=this,n=l.a.cloneDeep(t.keyName);this.$confirm("Se borrara la plantilla, ¿Esta seguro?","Cuidado",{confirmButtonText:"OK",cancelButtonText:"Cancelar",type:"warning"}).then((function(){c.deleteTemplate(n).then((function(t){t&&c.list.splice(e,1)}))})).catch((function(){a.$message({showClose:!0,type:"info",message:"Se cancelo la operación"})}))}}},p=u,m=a("2877"),d=Object(m["a"])(p,n,r,!1,null,"2d9a34c0",null);t["default"]=d.exports}}]);
//# sourceMappingURL=chunk-20c8764d.8af1ed14.js.map